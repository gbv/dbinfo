<!DOCTYPE html>
<html lang="ngerman">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jakob Voß, Verbundzentrale des GBV" />
  <meta name="date" content="2013-10-14 (version 0.00rev2)" />
  <title>GBV Datenbankverzeichnis</title>
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
</head>
<body>
<header>
<h1 class="title">GBV Datenbankverzeichnis</h1>
<h3 class="author">Jakob Voß, Verbundzentrale des GBV</h3>
<h4 class="date">2013-10-14 (version 0.00rev2) (version 0.00rev2)</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#übersicht-der-webanwendung"><span class="toc-section-number">1</span> Übersicht der Webanwendung</a><ul>
<li><a href="#abruf-von-datenbankinformationen"><span class="toc-section-number">1.1</span> Abruf von Datenbankinformationen</a></li>
</ul></li>
<li><a href="#administration"><span class="toc-section-number">2</span> Administration</a><ul>
<li><a href="#installation-und-updates"><span class="toc-section-number">2.1</span> Installation und Updates</a></li>
<li><a href="#lokaler-aufruf"><span class="toc-section-number">2.2</span> Lokaler Aufruf</a></li>
</ul></li>
<li><a href="#software-entwicklung"><span class="toc-section-number">3</span> Software-Entwicklung</a><ul>
<li><a href="#übersicht"><span class="toc-section-number">3.1</span> Übersicht</a></li>
<li><a href="#voraussetzungen"><span class="toc-section-number">3.2</span> Voraussetzungen</a></li>
<li><a href="#unit-tests"><span class="toc-section-number">3.3</span> Unit-Tests</a></li>
<li><a href="#debugging"><span class="toc-section-number">3.4</span> Debugging</a></li>
<li><a href="#debian-paket"><span class="toc-section-number">3.5</span> Debian-Paket</a></li>
</ul></li>
</ul>
</nav>
<p>Das Datenbankverzeichnis unter <a href="http://uri.gbv.de/database/">http://uri.gbv.de/database/</a> (kurz <strong>dbinfo</strong>) fürt Informationen über Kataloge und andere Datenbanken die für den GBV relevant sind zusammen und stellt diese Informationen als Linked Open Data zur Verfügung.</p>
<section class="level1" id="übersicht-der-webanwendung">
<h1><a href="#übersicht-der-webanwendung"><span class="header-section-number">1</span> Übersicht der Webanwendung</a></h1>
<p>Das Datenbankverzeichnis ist öffentlich unter <a href="http://uri.gbv.de/database/">http://uri.gbv.de/database/</a> verfügbar.<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup> Im Wesentlichen können folgende Informationen abgerufen werden:</p>
<ul>
<li><p>Liste aller Datenbankgruppen und Datenbanken unter <a href="http://uri.gbv.de/database/">http://uri.gbv.de/database/</a>.</p></li>
<li><p>Liste von Datenbanken jeder Datenbankgruppe (z.B. lokale Bibliothekskataloge mit dem Präfix <code>opac</code> unter <a href="http://uri.gbv.de/database/opac">http://uri.gbv.de/database/opac</a>).</p></li>
<li><p>Datenbankdetails (z.B. zum GVK mit dem Datenbankkürzel <code>gvk</code> unter <a href="http://uri.gbv.de/database/gvk">http://uri.gbv.de/database/gvk</a> und zum Katalog der UB Hildesheim mit dem Datenbankkürzel <code>opac-de-hil2</code> unter <a href="http://uri.gbv.de/database/opac-de-hil2">http://uri.gbv.de/database/opac-de-hil2</a>).</p></li>
</ul>
<section class="level2" id="abruf-von-datenbankinformationen">
<a id="Abruf von Datenbankinformationen"></a><h2><a href="#abruf-von-datenbankinformationen"><span class="header-section-number">1.1</span> Abruf von Datenbankinformationen</a></h2>
<p>Bei Aufruf einer URI im Browser wird eine HTML-Seite ausgeliefert. Mit dem URL-Parameter <code>format</code> sowie per HTTP Content-Negotiation können folgende RDF-Serialisierungen ausgewählt werden:<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup></p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Format</th>
<th style="text-align: center;">Parameter</th>
<th style="text-align: center;">HTTP Accept header</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RDF/Turtle</td>
<td>format=ttl</td>
<td>text/turtle</td>
</tr>
<tr class="even">
<td>RDF/XM</td>
<td>format=rdfxml</td>
<td>application/rdf+xml</td>
</tr>
<tr class="odd">
<td>RDF/JSON</td>
<td>format=json</td>
<td>application/rdf+json</td>
</tr>
<tr class="even">
<td>JSON</td>
<td>format=dbinfo</td>
<td><em>kein RDF-Format</em></td>
</tr>
</tbody>
</table>
<p>Die verwendeten RDF-Ontologien sind unter <a href="http://uri.gbv.de/database/ontology.html">http://uri.gbv.de/database/ontology.html</a> dokumentiert.</p>
</section>
</section>
<section class="level1" id="administration">
<h1><a href="#administration"><span class="header-section-number">2</span> Administration</a></h1>
<p>Der Quellcode der Webanwendung liegt in einem git-Repository unter <a href="https://github.com/gbv/dbinfo">https://github.com/gbv/dbinfo</a>. Zur Installation wird daraus ein Debian-Paket erstellt.</p>
<section class="level2" id="installation-und-updates">
<a id="Installation und Updates"></a><h2><a href="#installation-und-updates"><span class="header-section-number">2.1</span> Installation und Updates</a></h2>
<p>…</p>
</section>
<section class="level2" id="lokaler-aufruf">
<a id="Lokaler Aufruf"></a><h2><a href="#lokaler-aufruf"><span class="header-section-number">2.2</span> Lokaler Aufruf</a></h2>
<p>Das Skript <code>run.sh</code> startet die Anwendung mit dem Starman-Webserver. Zum Testen kann über den Parameter <code>-d</code> stattdessen Plackup ausgewählt werden.</p>
</section>
</section>
<section class="level1" id="software-entwicklung">
<h1><a href="#software-entwicklung"><span class="header-section-number">3</span> Software-Entwicklung</a></h1>
<section class="level2" id="übersicht">
<a id="Übersicht"></a><h2><a href="#übersicht"><span class="header-section-number">3.1</span> Übersicht</a></h2>
<p>Die Anwendung ist in Perl geschrieben. Benötigte CPAN-Module sind in der Datei <code>cpanfiles</code> aufgeführt und werden mittels <a href="https://metacpan.org/module/Carton">carton</a> im Unterverzeichnis <code>local</code> installiert.</p>
</section>
<section class="level2" id="voraussetzungen">
<a id="Voraussetzungen"></a><h2><a href="#voraussetzungen"><span class="header-section-number">3.2</span> Voraussetzungen</a></h2>
<p>Zur Weiterentwicklung der Webanwendung werden benötigt:</p>
<ul>
<li>Grundlegende Build-Tools (GNU make, C-Compiler etc.)</li>
<li>Debian-Paket-Tools (devscripts und debhelper)</li>
<li>git</li>
<li>Perl (mind. 5.14)</li>
<li><a href="https://metacpan.org/module/Carton">carton</a> (mind. 1.0) und cpanm (mind. 1.6)</li>
</ul>
<p>Die benötigten Programme lassen sich unter Ubuntu folgendermaßen installieren:</p>
<pre><code>sudo apt-get install build-essential devscripts debhelper git-core perl
wget -O - http://cpanmin.us | sudo perl - --self-upgrade
sudo cpanm Carton</code></pre>
</section>
<section class="level2" id="unit-tests">
<a id="Unit-Tests"></a><h2><a href="#unit-tests"><span class="header-section-number">3.3</span> Unit-Tests</a></h2>
<p>Im Verzeichnis <code>t/</code> befinden sich Unit-Tests. Das Skript <code>./test.sh</code> vereinfacht die Ausführung mittels carton. Um vor jedem Commit zu testen, empfiehlt sich folgendes Skript als ausführbare Datei <code>.git/hooks/pre-commit</code>. Mit <code>git commit -n</code> lässt sich der Test zur Not übergehen:</p>
<pre><code>#!/bin/sh
git stash -q --keep-index  # safe working copy
./test.sh; RESULT=$?       # run tests
git stash pop -q           # restore working copy
exit $RESULT</code></pre>
<p>Die Datei <code>.travis.yml</code> enthält eine Konfiguration um nach einem git-push nach GitHub alle Tests automatisch auf <a href="https://travis-ci.org/gbv/Covers">https://travis-ci.org/gbv/Covers</a> laufen zu lassen.</p>
</section>
<section class="level2" id="debugging">
<a id="Debugging"></a><h2><a href="#debugging"><span class="header-section-number">3.4</span> Debugging</a></h2>
<p>Zum Logging wird <a href="https://metacpan.org/module/Log::Contextual">Log::Contextual</a> auf verschiedenen Ebenen verwendet. Die Umgebungsvariable <code>GBV_APP_COVERS_UPTO</code> setzt die Ebene, ab der Nachrichten als Warnungen ausgegeben werden. Das run-Skript setzt diese Variable über den Parameter <code>-l</code>, bspw.:</p>
<pre><code>./run.sh -d -l trace</code></pre>
</section>
<section class="level2" id="debian-paket">
<a id="Debian-Paket"></a><h2><a href="#debian-paket"><span class="header-section-number">3.5</span> Debian-Paket</a></h2>
<p>Das Debian-Paket wird mit dem Skript <code>build-debian.pl</code> erstellt und befindet sich anschließend im Verzeichnis <code>debuild</code>, von wo es mit <code>dpkg --install</code> installiert werden kann.</p>
</section>
</section>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Der Zugriff per HTTPS unter <a href="https://uri.gbv.de/database/">https://uri.gbv.de/database/</a> ist ebenfalls möglich, die URIs verwenden allerdings alle HTTP.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Auf die Dopplung von URIs durch Unterscheidung zwischen “Information Resources” und “Non-Information Resources” wird geflissentlich verzichtet.<a href="#fnref2">↩</a></p></li>
</ol>
</section>
</body>
</html>
